
  <ng-container [ngClass]="{'list-group-item-danger': personDetails?.warning && personDetails?.warning?.id !== 1}" *ngIf="personDetails && !isClickable">
    <ng-container *ngTemplateOutlet="content"></ng-container>
  </ng-container>
  <a
    [routerLink]="['/contact-centre/detail/', personDetails?.personId]" [queryParams]="{showNotes: true}"
    [ngClass]="{'list-group-item-danger': personDetails?.warning && personDetails?.warning?.id !== 1}"
    *ngIf="personDetails && isClickable">
    <ng-container *ngTemplateOutlet="content"></ng-container>
  </a>


<ng-template #content>
  <div class="card">
    <div class="card__header">
      <span>
        <sup>
          <app-score-badge [person]="personDetails"></app-score-badge> <span class="pill pill--negative"
            *ngIf="personDetails?.warning && personDetails?.warning?.id !== 1">{{personDetails?.warningStatusComment || personDetails?.warning?.value}}</span>
        </sup>
        <p class="txt--title">{{personDetails?.addressee}}</p>
      </span>
      <div class="flexRight">
        <div dropdown placement="bottom right">
          <a class="btn btn-light dropdown-toggle" href [id]="'button'" dropdownToggle
            (click)="$event.stopPropagation(); false" [attr.aria-controls]="'dropdown'"><svg aria-hidden="true"
              width="64" height="64" viewBox="0 0 64 64" class="icon">
              <ellipse class="st0" cx="32" cy="10.5" rx="5.9" ry="6" />
              <ellipse class="st0" cx="32" cy="32" rx="5.9" ry="6" />
              <ellipse class="st0" cx="32" cy="53.5" rx="5.9" ry="6" /></svg></a>
          <ul [id]="'dropdown'" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu"
            [attr.aria-labelledby]="'button'">
            <li role="menuitem">
              <a class="dropdown-item" (click)="navigate()">
                <span class="dropdown-icon"><i class="fas fa-edit fa-fw"></i></span>Edit
              </a>
            </li>
          </ul>
        </div>
      </div>
      <!-- <button class="btn btn--none flexRight"><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
          class="icon">
          <polygon points="42.7 6.7 57.3 21.3 64 14.5 49.7 0 " />
          <path d="M40.3 9.6l-38 38L0 64l16.9-2 38-37.9L40.3 9.6zM4 59.9l1.9-11.7 9.8 9.8L4 59.9z" /></svg>
      </button> -->
    </div>
    <div class="card__body">
      <ol class="list">
        <li>
          <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--onLeft"><path d="M56 24c0 17.5-20.3 38-21.2 38.8C34 63.6 33 64 32 64c-1 0-2-0.4-2.8-1.2C28.3 62 8 41.5 8 24 8 10.8 18.8 0 32 0S56 10.8 56 24zM32 36c6.6 0 12-5.4 12-12 0-6.6-5.4-12-12-12s-12 5.4-12 12C20 30.6 25.4 36 32 36z"/></svg>
          <span>
            {{personDetails?.address | formatAddress}}
            <p class=" txt--negative" *ngIf="!(personDetails?.address | formatAddress)">No address</p>
          </span>
        </li>
        <li>
          <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--onLeft"><path d="M57.6 43.2c-4 0-7.8-0.6-11.4-1.8 -1.1-0.4-2.4-0.1-3.3 0.8l-7 7c-9.1-4.6-16.5-12-21.1-21.1l7-7.1c0.9-0.8 1.2-2.1 0.8-3.2 -1.2-3.6-1.8-7.4-1.8-11.4 0-1.8-1.4-3.2-3.2-3.2H6.4c-1.8 0-3.2 1.4-3.2 3.2 0 30 24.4 54.4 54.4 54.4 1.8 0 3.2-1.4 3.2-3.2V46.4C60.8 44.6 59.4 43.2 57.6 43.2z"/></svg>
          
            <p class="txt--negative" *ngIf="!personDetails.phoneNumbers.length || !personDetails.phoneNumbers[0].number">No phone</p>
            <ng-container *ngFor="let phoneNumber of personDetails?.phoneNumbers">
              <p *ngIf="phoneNumber?.number">
                <app-telephone [person]="personDetails" [number]="phoneNumber?.number" [warning]="personDetails?.warningStatusComment || personDetails?.warning?.value"></app-telephone>
              </p>
            </ng-container>
        
        </li>
        <li>
          <span>
            <p class="txt--negative" *ngIf="!personDetails?.emailAddresses.length || !personDetails?.emailAddresses[0].email">No email</p>
            <p *ngFor="let emailAddresses of personDetails.emailAddresses">
              <a class="mobile-btn" href="mailto:{{emailAddresses.email}}" *ngIf="emailAddresses.email"><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--onLeft"><path d="M-0.3 13.8v-3.6c0-1.1 0.9-2.1 2.1-2.1h59.9c1.1 0 2.1 0.9 2.1 2.1v3.6l-32 20L-0.3 13.8zM32.8 37.9c-0.3 0.2-0.7 0.3-1.1 0.3 -0.4 0-0.7-0.1-1.1-0.3L-0.3 18.5v35.6c0 1.1 0.9 2.1 2.1 2.1h59.9c1.1 0 2.1-0.9 2.1-2.1V18.5L32.8 37.9z"/></svg>{{emailAddresses.email}}</a>
            </p>
          </span>
        </li>
      </ol>

      <ol class="list list--divider list--details">
        <li>
          <details>
            <summary>
              <div class="summary__title">
                Marketing Preferences
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--s flexRight">
                  <path class="vertical"
                    d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z" />
                  <path class="horizontal"
                    d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z" />
                </svg>
              </div>
            </summary>
            <ol class="list">
              <li>
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-positive"
                  *ngIf="personDetails.marketingPreferences?.general">
                  <path
                    d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                </svg>
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-negative"
                  *ngIf="!personDetails.marketingPreferences?.general">
                  <path
                    d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                </svg>
                Quarty Bulletin
              </li>
              <li> <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-positive"
                  *ngIf="personDetails.marketingPreferences?.offersSurveys">
                  <path
                    d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                </svg>
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-negative"
                  *ngIf="!personDetails.marketingPreferences?.offersSurveys">
                  <path
                    d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                </svg>Special Offers</li>
              <li> <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-positive"
                  *ngIf="personDetails.marketingPreferences?.events">
                  <path
                    d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                </svg>
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-negative"
                  *ngIf="!personDetails.marketingPreferences?.events">
                  <path
                    d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                </svg>Landlord / Investor Events</li>
              <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-positive"
                  *ngIf="personDetails.marketingPreferences?.newHomes">
                  <path
                    d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                </svg>
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-negative"
                  *ngIf="!personDetails.marketingPreferences?.newHomes">
                  <path
                    d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                </svg>New Homes / Investments</li>
              <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-positive"
                  *ngIf="personDetails.marketingPreferences?.general">
                  <path
                    d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                </svg>
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                  class="icon icon--s icon--onLeft icon--fill-negative"
                  *ngIf="!personDetails.marketingPreferences?.general">
                  <path
                    d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                </svg>Other Occasional Marketing</li>
            </ol>
          </details>
        </li>
        <li>
          <details>
            <summary>
              <div class="summary__title">
                Referrals
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--s flexRight">
                  <path class="vertical"
                    d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z" />
                  <path class="horizontal"
                    d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z" />
                </svg>
              </div>
            </summary>
            <ol class="list">
              <li><a href="">Prestige<svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                    class="icon icon--s icon--onRight icon--fill-info">
                    <path
                      d="M57.8 21.7v36.1H21.7V21.7H57.8M60.7 16.5H18.8c-1.3 0-2.3 1-2.3 2.3v41.8c0 1 1 2.3 2.3 2.3h41.8c1 0 2.3-1.3 2.3-2.3V18.8C63 17.6 61.7 16.5 60.7 16.5z" />
                    <path
                      d="M11.7 42.3H6.2V6.2h36.1v5.5h5.2V3.3C47.5 2 46.2 1 45.2 1H3.3C2 1 1 2 1 3.3v41.8c0 1 1 2.3 2.3 2.3h8.3V42.3z" />
                  </svg></a></li>
              <li><a href="">Laurus Law<svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                    class="icon icon--s icon--onRight icon--fill-info">
                    <path
                      d="M57.8 21.7v36.1H21.7V21.7H57.8M60.7 16.5H18.8c-1.3 0-2.3 1-2.3 2.3v41.8c0 1 1 2.3 2.3 2.3h41.8c1 0 2.3-1.3 2.3-2.3V18.8C63 17.6 61.7 16.5 60.7 16.5z" />
                    <path
                      d="M11.7 42.3H6.2V6.2h36.1v5.5h5.2V3.3C47.5 2 46.2 1 45.2 1H3.3C2 1 1 2 1 3.3v41.8c0 1 1 2.3 2.3 2.3h8.3V42.3z" />
                  </svg></a><span class="pill flexRight">13/04/2020</span></li>
              <li><a href="">Pro Valuations</a></li>
              <li><a href="">Refurb Dept.</a></li>
              <li><a href="">Home Helper</a></li>
              <li><a href="">Prop Management</a></li>
            </ol>
          </details>
        </li>
      </ol>
    </div>
  </div>
</ng-template>

<!-- <ng-template #contentOld>
  <div class="text-right">
    <div class="row">
      <div class="col-auto">
        <app-score-badge [person]="personDetails"></app-score-badge> <span class="badge badge-pill badge-danger"
          *ngIf="personDetails?.warning && personDetails?.warning?.id !== 1">{{personDetails?.warningStatusComment || personDetails?.warning?.value}}</span>
      </div>
      <div class="col text-right">
        <a (click)="$event.stopPropagation()"
          [routerLink]="['/contact-centre/detail/', personDetails?.personId, 'edit']"><i class="fas fa-edit"></i>
          Edit</a>
      </div>
    </div>
  </div>
  <div class="row mb-1" *ngIf="personDetails?.personNotes?.length">
    <div class="col-12">
      <div class="alert alert-danger small mb-2 mr-2 d-inline-block"
        *ngFor="let importantNote of personDetails?.personNotes">
        {{importantNote.text}}
      </div>
    </div>
  </div>
  <div class="row" *ngIf="personDetails">
    <div class="col-12">
      <p class="mb-2">
        <strong>{{personDetails.addressee}}</strong>
      </p>
    </div>
    <div class="col-sm-4">
      <div class="mb-2">
        <pre>{{personDetails.address | formatAddress}}</pre><span class="text-danger"
          *ngIf="!(personDetails.address | formatAddress)">No address</span></div>
    </div>
    <div class="col-12 col-sm-3 col-xl-4">
      <p class="mb-2 text-danger" *ngIf="!personDetails.phoneNumbers.length || !personDetails.phoneNumbers[0].number">No
        phone</p>
      <ng-container *ngFor="let phoneNumber of personDetails.phoneNumbers">
        <p class="mb-2" *ngIf="phoneNumber.number">
          <app-telephone [person]="personDetails" [number]="phoneNumber.number"
            [warning]="personDetails?.warningStatusComment || personDetails?.warning?.value">
          </app-telephone>
        </p>
      </ng-container>
    </div>
    <div class="col-sm-5 col-xl-4">
      <p class="mb-2 text-danger"
        *ngIf="!personDetails.emailAddresses.length || !personDetails.emailAddresses[0].email">
        No
        email</p>
      <ng-container *ngFor="let emailAddresses of personDetails.emailAddresses">
        <p class="mb-2 text-truncate" *ngIf="emailAddresses.email"><a class="mobile-btn"
            href="mailto:{{emailAddresses.email}}">{{emailAddresses.email}}</a></p>
      </ng-container>
    </div>
    <div class="col-12">
      <hr class="my-1">
    </div>
    <div class="col-12">
      <div class="row align-items-center">
        <div class="col">
          <button type="button" class="btn btn-link px-0" (click)="isCollapsed = !isCollapsed"
            [attr.aria-expanded]="!isCollapsed" aria-controls="collapseBasic">Marketing Prefs <span
              class="badge badge-pill badge-primary">
              {{personDetails.marketingPreferences?.count || 0}} </span>
          </button>
        </div>
      </div>
      <div id="collapseBasic" [collapse]="!isCollapsed">
        <ul>
          <li *ngIf="personDetails.marketingPreferences?.marketBulletin">Quarterly bulletin</li>
          <li *ngIf="personDetails.marketingPreferences?.general">Special offers</li>
          <li *ngIf="personDetails.marketingPreferences?.events">Landlord/investor events</li>
          <li *ngIf="personDetails.marketingPreferences?.newHomes">New homes/investments</li>
          <li *ngIf="personDetails.marketingPreferences?.general">Other occasional marketing</li>
        </ul>
      </div>
    </div>
  </div>
</ng-template> -->