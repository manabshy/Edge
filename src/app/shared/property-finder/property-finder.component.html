<form class="mb-0" [formGroup]="propertyFinderForm">
  <div class="form-group row">
    <label for="property" class="col-sm-2 col-form-label col-form-label-sm">
      Find property
    </label>
    <div class="col-sm-10">
      <div class="input-group input-group-sm">
        <input type="search" class="form-control" formControlName="searchTerm" placeholder="Property Address or Id"
          aria-label="Property Address" (keyup)="onKeyup($event)" [ngbTypeahead]="suggestions" [focusFirst]="false"
          (selectItem)="selectedSuggestion($event)">
        <div class="input-group-append">
          <button type="button" class="btn btn-secondary" (click)="searchProperty()">Search</button>
        </div>
      </div>
      <div class="off-canvas" [hidden]="!properties" (click)="properties = null">
        <div class="off-canvas-content right slide-in-right" (click)="$event.stopPropagation()" #offCanvasContent>
          <h4 class="page-title text-left pt-3">
            Quick finder
            <button type="button" class="close mr-2" aria-label="Close" (click)="properties = null">
              <span aria-hidden="true">&times;</span>
            </button>
          </h4>
          <app-subnav>
            <ng-container *ngIf="properties">
              <app-subnav-item *ngFor="let property of properties" (click)="selectProperty(property?.propertyId)">
                <div class="row">
                  <div class="col-12 mb-2" *ngIf="property?.propertyId">
                    <small class="text-muted mr-2">PR-{{property?.propertyId}}</small>
                  </div>
                  <div class="col-sm">
                    {{property?.propertyAddress}}
                  </div>
                </div>
              </app-subnav-item>
            </ng-container>
          </app-subnav>
        </div>
      </div>
    </div>
  </div>
</form>
