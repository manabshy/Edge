<ng-container>
  <form class="pb-0" [formGroup]="signerFinderForm" autocompleteOff>
    <div class="row" [hidden]="!selectedSignerDetails">
      <ng-container *ngIf="!label; else givenLabel "><label for="searchTerm"
          class="col-sm-2 col-form-label col-form-label-sm">Signers</label></ng-container>
      <ng-template #givenLabel><label for="searchTerm"
          class="col-sm-2 col-form-label col-form-label-sm">{{label}}</label></ng-template>
      <div class="col-sm-10">
        <div class="form-group">
          <input type="text" #selectedSignerInput readonly class="form-control-sm form-control-plaintext font-weight-bold"
            id="selectedSigner" formControlName="selectedSigner">
          <a class="small mr-3" href (click)="toggleSearch()">
            Change
            <ng-container *ngIf="!label; else givenLabel1 ">Signers</ng-container>
            <ng-template #givenLabel1>{{label}}</ng-template>
          </a>
          <a *ngIf="selectedSignerDetails" class="small" [routerLink]="['/contact-centre/detail/0/people/', selectedSignerDetails?.contactGroupId]" (click)="$event.stopPropagation()">
            View
            <ng-container *ngIf="!label; else givenLabel2 ">Signers</ng-container>
            <ng-template #givenLabel2>{{label}}</ng-template>
          </a>
        </div>
      </div>
    </div>

    <div class="row" [hidden]="!isSearchVisible">
      <ng-container *ngIf="!label; else givenLabel3 "><label for="searchTerm"
          class="col-sm-2 col-form-label col-form-label-sm">Find Signers</label></ng-container>
      <ng-template #givenLabel3><label for="searchTerm" class="col-sm-2 col-form-label col-form-label-sm"> Find
          {{label}}</label></ng-template>
      <div class="col-sm-10">
        <div class="form-group">
          <div class="input-group input-group-sm">
            <input #searchSignerInput type="search" id="searchTerm" class="form-control" formControlName="searchTerm"
              (keydown.enter)="searchSigner()" [ngbTypeahead]="suggestions" [focusFirst]="false" (selectItem)="selectedSuggestion($event)">
            <div class="input-group-append">
              <button type="button" class="btn btn-secondary" (click)="searchSigner()">Search</button>
            </div>
          </div>
        </div>
        <a class="small mb-3" [routerLink]="['/contact-centre/detail/0/people', 0]" *ngIf="noSuggestions"
          [queryParams]="{isNewContactGroup: true, isSigner: true}" (click)="createNewSigner()">
            <i class="fas fa-plus mr-2"></i> New Contact Group
        </a>
        <div class="off-canvas" [hidden]="!signers" (click)="signers = null">
          <div class="off-canvas-content right slide-in-right" (click)="$event.stopPropagation()" #offCanvasContent>
            <h4 class="page-title text-left pt-3">
              Quick finder
              <button type="button" class="close mr-2" aria-label="Close" (click)="signers = null">
                <span aria-hidden="true">&times;</span>
              </button>
            </h4>
            <app-subnav>
              <ng-container *ngIf="!isLoading">
                <app-subnav-item *ngFor="let signer of signers"
                  (click)="selectSigner(signer.contactGroupId)">
                  <div class="row">
                    <div class="col-sm-4">
                      <b [innerHTML]="signer.contactNames | highlight : signerFinderForm.value.searchTerm"
                        [ngClass]="{'mr-2': signer?.companyName}"></b>
                      <ng-container *ngIf="signer?.companyName">
                        <span class="badge badge-pill badge-info">{{signer?.companyName}}</span>
                      </ng-container>
                    </div>
                    <div class="col-sm-4">
                      {{signer?.phoneNumber}}
                    </div>
                    <div class="col-sm-4">
                      {{signer?.emailAddress}}
                    </div>
                  </div>
                </app-subnav-item>
              </ng-container>
              <div class="list-group-item text-center" *ngIf="!signers?.length && !isLoading">
                No signers found
              </div>
              <div class="list-group-item text-center" *ngIf="isLoading">
                <i class="fas fa-spinner fa-pulse d-inline-block"></i> Loading results ...
              </div>
              <a [routerLink]="['/contact-centre/detail/0/people', 0]"
                [queryParams]="{isNewContactGroup: true, isSigner: true}" (click)="createNewSigner()"
                class="list-group-item list-group-item-action text-center py-4">
                <span class="btn-link">
                  <i class="fas fa-plus mr-2"></i> New Contact Group
                </span>
              </a>
            </app-subnav>
          </div>
        </div>
      </div>
    </div>
  </form>
</ng-container>