<div class="list-group">
  <div class="list-group-item list-group-item-action text-center py-4" *ngIf="dataNote" (click)="addNote()">
    <span class="btn-link">
      <i class="fas fa-sticky-note mr-2"></i> Add Note
    </span>
  </div>
  <div class="list-group-item text-center text-danger" *ngIf="!personNotes?.length && !contactGroupNotes?.length; else results">
    <i class="far fa-sad-tear"></i> No notes
  </div>
  <ng-template #results>
   <ng-container *ngIf="personNotes">
      <div class="list-group-item" *ngFor="let note of personNotes">
        <div class="row">
          <div class="col-sm-2 text-right order-sm-2">
            <div class="btn-group" dropdown placement="bottom right">
              <button id="actionsToggle" dropdownToggle type="button" class="btn btn-link p-0 dropdown-toggle"
                aria-controls="actionsList">
                Actions <span class="caret"></span>
              </button>
              <ul id="actionsList" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu"
                aria-labelledby="actionsToggle">
                <li role="menuitem"><button type="button" class="dropdown-item" (click)="setImportantFlag(note?.personNoteId, true)"><i
                      class="fas fa-exclamation-circle fa-fw mr-2 text-danger"></i> Set as important</button></li>
                <li role="menuitem"><button type="button" class="dropdown-item" (click)="setPinnedFlag(note?.personNoteId, true)"><i
                      class="fas fa-thumbtack fa-fw mr-2"></i> Pin to top</button></li>
              </ul>
            </div>
          </div>
          <div class="col-sm-10 order-sm-1">
            <div class="row">
              <div class="col-sm-auto" [ngClass]="note.isImportant || note.isPinned ? '' : 'd-none d-sm-block'" >
                <dl class="row" [ngClass]="note.isImportant || note.isPinned ? 'visible' : 'invisible'" >
                  <dt class="col-4 col-sm-auto" [tooltip]="note.isImportant ? 'Important' : 'Pinned to top'">
                    <i class="fas fa-exclamation-circle text-danger fa-fw" *ngIf="note.isImportant"></i>
                    <i class="fas fa-thumbtack fa-fw" *ngIf="!note.isImportant"></i>
                  </dt>
                  <dd class="col d-sm-none" *ngIf="note.isImportant">Important</dd>
                  <dd class="col d-sm-none" *ngIf="!note.isImportant">Pinned to top</dd>
                </dl>
              </div>
              <div class="col-sm-6">
                <dl class="row">
                  <dt class="col-4 d-sm-none">Note</dt>
                  <dd class="col">{{note?.text}}</dd>
                </dl>
              </div>
              <div class="col-sm">
                <dl class="row">
                  <dt class="col-4 d-sm-none">Date</dt>
                  <dd class="col">{{note?.createDate | date: 'd/MM/yyyy'}}</dd>
                </dl>
              </div>
              <div class="col-sm text-truncate">
                <dl class="row text-truncate">
                  <dt class="col-4 d-sm-none">Owner</dt>
                  <dd class="col text-truncate">{{note?.createdBy}}</dd>
                </dl>
              </div> 
            </div>
          </div>
        </div>
      </div>
   </ng-container>
   <ng-container *ngIf="contactGroupNotes">
      <div class="list-group-item" *ngFor="let note of contactGroupNotes">
        <div class="row">
          <div class="col-sm-2 text-right order-sm-2">
            <div class="btn-group" dropdown placement="bottom right">
              <button id="actionsToggle" dropdownToggle type="button" class="btn btn-link p-0 dropdown-toggle"
                aria-controls="actionsList">
                Actions <span class="caret"></span>
              </button>
              <ul id="actionsList" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu"
                aria-labelledby="actionsToggle">
                <li role="menuitem"><button type="button" class="dropdown-item" (click)="setImportantFlag(note.contactNoteId)"><i
                      class="fas fa-exclamation-circle fa-fw mr-2 text-danger" ></i> Set as important</button></li>
                <li role="menuitem"><button type="button" class="dropdown-item" (click)="setPinnedFlag(note.contactNoteId)"><i
                      class="fas fa-thumbtack fa-fw mr-2"></i> Pin to top</button></li>
              </ul>
            </div>
          </div>
          <div class="col-sm-10 order-sm-1">
            <div class="row">
              <div class="col-sm-auto" [ngClass]="note.isImportant || note.isPinned ? '' : 'd-none d-sm-block'" >
                <dl class="row" [ngClass]="note.isImportant || note.isPinned ? 'visible' : 'invisible'" >
                  <dt class="col-4 col-sm-auto" [tooltip]="note.isImportant ? 'Important' : 'Pinned to top'">
                    <i class="fas fa-exclamation-circle text-danger fa-fw" *ngIf="note.isImportant"></i>
                    <i class="fas fa-thumbtack fa-fw" *ngIf="!note.isImportant"></i>
                  </dt>
                  <dd class="col d-sm-none" *ngIf="note.isImportant">Important</dd>
                  <dd class="col d-sm-none" *ngIf="!note.isImportant">Pinned to top</dd>
                </dl>
              </div>
              <div class="col-sm-6">
                <dl class="row">
                  <dt class="col-4 d-sm-none">Note</dt>
                  <dd class="col">{{note?.text}}</dd>
                </dl>
              </div>
              <div class="col-sm">
                <dl class="row">
                  <dt class="col-4 d-sm-none">Date</dt>
                  <dd class="col">{{note?.createDate | date: 'd/MM/yyyy'}}</dd>
                </dl>
              </div>
              <div class="col-sm text-truncate">
                <dl class="row text-truncate">
                  <dt class="col-4 d-sm-none">Owner</dt>
                  <dd class="col text-truncate">{{note?.createdBy}}</dd>
                </dl>
              </div>
            </div>
          </div>
        </div>
      </div>
   </ng-container>
  </ng-template>
</div>
