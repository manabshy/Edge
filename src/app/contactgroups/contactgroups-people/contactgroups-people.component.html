<div class="row">
  <div class="row__item row__item--aside">
    <div class="card card--sticky">
      <div class="card__body card__body--list">
        <ol class="list list--divider list--hover">
          <li [ngClass]="{current: item.isCurrent}" *ngFor="let item of infoTypes;index as i">
            <a role="button" class="overall" (click)="setInfoType(item?.name,i)"></a>
            {{item?.name|toPascalCase}}
          </li>
        </ol>

        <!-- <app-contactgroup-card [contactGroup]="contactGroupDetails"></app-contactgroup-card> -->
      </div>
    </div>
  </div>

  <div class="row__item">
    <div [ngSwitch]="info">
      <ng-container *ngSwitchCase="'notes'">
        <div>
          <div class="col-sm-10 offset-sm-2" [ngClass]="{'notes-disabled': !contactGroupDetails?.contactGroupId}">
            <!-- <label class="small">Notes</label> -->
            <small class="alert alert-info" *ngIf="!contactGroupDetails?.contactGroupId">Save to enable
              Notes</small>
            <app-notes [noteData]="dataNote" [contactGroupNotes]="dataNote?.notes" [bottomReached]="bottomReached"
              [pageNumber]="page"></app-notes>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchDefault>
        <!-- <app-breadcrumb></app-breadcrumb> -->
        <h2>
          <ng-container *ngIf="isNewContactGroup;else existingContact">{{newContactGroupLabel}}</ng-container>
          <ng-template #existingContact>
            <ng-container *ngIf="contactGroupDetails?.contactType === 4; else peopleCG">Company</ng-container>
            <ng-template #peopleCG>Personal</ng-template> Contact Group
          </ng-template>
          <span class="pill pill--positive" *ngIf="isAMLCompleted">AML Completed</span>
        </h2>
        <div class="message message--warning"
          *ngIf="contactGroupDetails?.contactPeople && (contactGroupDetails?.contactPeople.length !== initialContactGroupLength) && isTypePicked">
          There are pending changes on the people list. Save to make them effective.
        </div>
        <div class="message message--negative"
          *ngIf="!contactGroupDetails?.contactPeople?.length && !isNewContactGroup && !isExistingCompany">
          You must add at least <b>1</b> person in the contact group.
        </div>
        <div class="message message--negative" *ngIf="isLastPerson && !companyAlert">
          You must have at least <b>1</b> person in the contact group.
        </div>
        <div class="alert alert-danger"
          *ngIf="contactGroupDetails?.contactPeople && companyAlert && !isNewContactGroup && !isExistingCompany">
          You must add <b>1</b> company for a company contact.
        </div>

        <!-- <form action="">
      <fieldset class="fieldset--width-max">
        <legend class="legend">Company</legend>
        <label for="">Company Name</label>
        <button class="btn btn--link">Name here</button><button class="btn btn--ghost btn--onRight">Change</button>
      </fieldset>

      <fieldset>
        <label for="">Country</label>
        <span class="select">
          <select>
            <option>United Kingdom</option>
          </select>
        </span>
      </fieldset>

      <fieldset>
        <label for="">Find Address (Postcode)</label>
        <div class="inline-parent inline-parent--search">
          <input type="text">
          <button class="btn btn--search">Search</button>
        </div>
      </fieldset>

      <fieldset>
        <label for="">Address Lines</label>
        <textarea></textarea>
      </fieldset>

      <fieldset>
        <label for="">Postcode</label>
        <input type="text">
      </fieldset>

      <fieldset>
        <label for="">Type</label>
        <span class="checkbox">
          <span>
            <input type="checkbox" tabindex="" name="" id="solicitor">
            <label for="solicitor">Solicitor</label>
          </span>
          <span>
            <input type="checkbox" tabindex="" name="" id="invClerk">
            <label for="invClerk">Inventory Clerk</label>
          </span>
          <span>
            <input type="checkbox" tabindex="" name="" id="estateAgent">
            <label for="estateAgent">Estate Agent</label>
          </span>
          <span>
            <input type="checkbox" tabindex="" name="" id="mortgageAdvisor">
            <label for="mortgageAdvisor">Mortgage Advisor</label>
          </span>
        </span>
      </fieldset>
    </form> -->

        <form action="">
          <ng-container *ngIf="isNewContactGroup && !isTypePicked">
            <h5>Type of Contact Group?</h5>
            <fieldset>
              <span class="radio radio--boxed">
                <span (click)="isCompanyContactGroup(false)">
                  <input type="radio" name="radio1" id="radio1" checked="">
                  <label for="radio1" class="txt--center">
                    <h4><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--onLeft">
                        <path
                          d="M32 32c8.6 0 15.5-7 15.5-15.5C47.5 7.9 40.6 1 32 1S16.5 7.9 16.5 16.5C16.5 25 23.4 32 32 32zM32 39.8c-10.3 0-31 5.2-31 15.5V63h62v-7.8C63 44.9 42.3 39.8 32 39.8z">
                        </path>
                      </svg>Personal Contact Group</h4>
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>
                  </label>
                </span>
                <span (click)="isCompanyContactGroup(true)">
                  <input type="radio" name="radio1" id="radio2">
                  <label for="radio2" class="txt--center">
                    <h4><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--onLeft">
                        <path
                          d="M56.8 14.9H44.4V8.8c0-3.4-2.8-6.2-6.2-6.2H25.8c-3.4 0-6.2 2.8-6.2 6.2v6.2H7.2c-3.4 0-6.2 2.8-6.2 6.2l0 34.1c0 3.4 2.8 6.2 6.2 6.2h49.6c3.4 0 6.2-2.8 6.2-6.2V21.1C63 17.7 60.2 14.9 56.8 14.9zM38.2 14.9H25.8V8.8h12.4V14.9z" />
                      </svg>Company Contact Group</h4>
                    <p>Ut cumque omnis similique totam numquam eos accusantium possimus ea in.</p>
                  </label>
                </span>
              </span>
            </fieldset>
          </ng-container>

          <div class="wrapper--redacted" *ngIf="isNewPersonalContact && !contactGroupDetails?.contactPeople.length">
            <ol class="cards cards--marginBottom">
              <li>
                <div class="card">
                  <div class="card__body">
                    <ol class="list">
                      <li class="title">
                        <span>
                          <sup>
                            <span class="pill pill--positive redacted"></span>
                            <span class="pill pill--negative redacted"></span>
                          </sup>
                          <p class="txt--title"><span class="redacted"></span></p>
                          <small>
                            <span class="txt--positive redacted redacted--50pc"></span>
                          </small>
                        </span>
                      </li>
                      <li class="expandable">
                        <details onclick="return false;" open="">
                          <summary>
                            <div class="summary__title">
                              <span class="redacted redacted--90pc"></span>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--s flexRight">
                                <path
                                  d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z"
                                  class="vertical"></path>
                                <path
                                  d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z"
                                  class="horizontal"></path>
                              </svg>
                            </div>
                          </summary>
                          <ol class="list">
                            <li>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--onLeft">
                                <path
                                  d="M56 24c0 17.5-20.3 38-21.2 38.8C34 63.6 33 64 32 64c-1 0-2-0.4-2.8-1.2C28.3 62 8 41.5 8 24 8 10.8 18.8 0 32 0S56 10.8 56 24zM32 36c6.6 0 12-5.4 12-12 0-6.6-5.4-12-12-12s-12 5.4-12 12C20 30.6 25.4 36 32 36z">
                                </path>
                              </svg>
                              <span class="redacted redacted--50pc"></span>
                              <span class="redacted redacted--10pc"></span>
                              <span class="redacted redacted--50pc"></span>
                            </li>
                            <li>
                              <ol class="list">
                                <li>
                                  <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                    class="icon icon--onLeft">
                                    <path
                                      d="M57.6 43.2c-4 0-7.8-0.6-11.4-1.8 -1.1-0.4-2.4-0.1-3.3 0.8l-7 7c-9.1-4.6-16.5-12-21.1-21.1l7-7.1c0.9-0.8 1.2-2.1 0.8-3.2 -1.2-3.6-1.8-7.4-1.8-11.4 0-1.8-1.4-3.2-3.2-3.2H6.4c-1.8 0-3.2 1.4-3.2 3.2 0 30 24.4 54.4 54.4 54.4 1.8 0 3.2-1.4 3.2-3.2V46.4C60.8 44.6 59.4 43.2 57.6 43.2z">
                                    </path>
                                  </svg>
                                  <span class="redacted redacted--70pc"></span>
                                </li>
                              </ol>
                            </li>
                            <li>
                              <ol class="list">
                                <li class="txt--breakword">
                                  <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                    class="icon icon--onLeft">
                                    <path
                                      d="M-0.3 13.8v-3.6c0-1.1 0.9-2.1 2.1-2.1h59.9c1.1 0 2.1 0.9 2.1 2.1v3.6l-32 20L-0.3 13.8zM32.8 37.9c-0.3 0.2-0.7 0.3-1.1 0.3 -0.4 0-0.7-0.1-1.1-0.3L-0.3 18.5v35.6c0 1.1 0.9 2.1 2.1 2.1h59.9c1.1 0 2.1-0.9 2.1-2.1V18.5L32.8 37.9z">
                                    </path>
                                  </svg>
                                  <span class="redacted redacted--50pc"></span>
                                </li>
                              </ol>
                            </li>
                          </ol>
                        </details>
                      </li>

                      <li class="expandable">
                        <details onclick="return false;">
                          <summary>
                            <div class="summary__title">
                              <span class="redacted redacted--50pc"></span>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--s flexRight">
                                <path
                                  d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z"
                                  class="vertical"></path>
                                <path
                                  d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z"
                                  class="horizontal"></path>
                              </svg>
                            </div>
                          </summary>
                        </details>
                      </li>

                      <li class="expandable">
                        <details onclick="return false;">
                          <summary>
                            <div class="summary__title">
                              <span class="redacted redacted--90pc"></span>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--s flexRight">
                                <path
                                  d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z"
                                  class="vertical"></path>
                                <path
                                  d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z"
                                  class="horizontal"></path>
                              </svg>
                            </div>
                          </summary>
                        </details>
                      </li>

                      <li class="expandable">
                        <details onclick="return false;">
                          <summary>
                            <div class="summary__title">
                              <span class="redacted redacted--70pc"></span>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--s flexRight">
                                <path
                                  d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z"
                                  class="vertical"></path>
                                <path
                                  d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z"
                                  class="horizontal"></path>
                              </svg>
                            </div>
                          </summary>
                        </details>
                      </li>
                    </ol>
                  </div>
                </div>
              </li>

              <li>
                <div class="card">
                  <div class="card__body">
                    <ol class="list">
                      <li class="title">
                        <span>
                          <sup>
                            <span class="pill pill--negative redacted"></span>
                          </sup>
                          <p class="txt--title"><span class="redacted redacted--50pc"></span></p>
                          <small>
                            <span class="txt--positive redacted redacted--70pc"></span>
                          </small>
                        </span>
                      </li>
                      <li class="expandable">
                        <details onclick="return false;" open="">
                          <summary>
                            <div class="summary__title">
                              <span class="redacted redacted--90pc"></span>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--s flexRight">
                                <path
                                  d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z"
                                  class="vertical"></path>
                                <path
                                  d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z"
                                  class="horizontal"></path>
                              </svg>
                            </div>
                          </summary>
                          <ol class="list">
                            <li>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--onLeft">
                                <path
                                  d="M56 24c0 17.5-20.3 38-21.2 38.8C34 63.6 33 64 32 64c-1 0-2-0.4-2.8-1.2C28.3 62 8 41.5 8 24 8 10.8 18.8 0 32 0S56 10.8 56 24zM32 36c6.6 0 12-5.4 12-12 0-6.6-5.4-12-12-12s-12 5.4-12 12C20 30.6 25.4 36 32 36z">
                                </path>
                              </svg>
                              <span class="redacted redacted--50pc"></span>
                              <span class="redacted redacted--20pc"></span>
                            </li>
                            <li>
                              <ol class="list">
                                <li>
                                  <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                    class="icon icon--onLeft">
                                    <path
                                      d="M57.6 43.2c-4 0-7.8-0.6-11.4-1.8 -1.1-0.4-2.4-0.1-3.3 0.8l-7 7c-9.1-4.6-16.5-12-21.1-21.1l7-7.1c0.9-0.8 1.2-2.1 0.8-3.2 -1.2-3.6-1.8-7.4-1.8-11.4 0-1.8-1.4-3.2-3.2-3.2H6.4c-1.8 0-3.2 1.4-3.2 3.2 0 30 24.4 54.4 54.4 54.4 1.8 0 3.2-1.4 3.2-3.2V46.4C60.8 44.6 59.4 43.2 57.6 43.2z">
                                    </path>
                                  </svg>
                                  <span class="redacted redacted--70pc"></span>
                                </li>
                              </ol>
                            </li>
                            <li>
                              <ol class="list">
                                <li class="txt--breakword">
                                  <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                    class="icon icon--onLeft">
                                    <path
                                      d="M-0.3 13.8v-3.6c0-1.1 0.9-2.1 2.1-2.1h59.9c1.1 0 2.1 0.9 2.1 2.1v3.6l-32 20L-0.3 13.8zM32.8 37.9c-0.3 0.2-0.7 0.3-1.1 0.3 -0.4 0-0.7-0.1-1.1-0.3L-0.3 18.5v35.6c0 1.1 0.9 2.1 2.1 2.1h59.9c1.1 0 2.1-0.9 2.1-2.1V18.5L32.8 37.9z">
                                    </path>
                                  </svg>
                                  <span class="redacted redacted--50pc"></span>
                                </li>
                              </ol>
                            </li>
                          </ol>
                        </details>
                      </li>

                      <li class="expandable">
                        <details onclick="return false;">
                          <summary>
                            <div class="summary__title">
                              <span class="redacted redacted--50pc"></span>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--s flexRight">
                                <path
                                  d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z"
                                  class="vertical"></path>
                                <path
                                  d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z"
                                  class="horizontal"></path>
                              </svg>
                            </div>
                          </summary>
                        </details>
                      </li>

                      <li class="expandable">
                        <details onclick="return false;">
                          <summary>
                            <div class="summary__title">
                              <span class="redacted redacted--90pc"></span>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--s flexRight">
                                <path
                                  d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z"
                                  class="vertical"></path>
                                <path
                                  d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z"
                                  class="horizontal"></path>
                              </svg>
                            </div>
                          </summary>
                        </details>
                      </li>

                      <li class="expandable">
                        <details onclick="return false;">
                          <summary>
                            <div class="summary__title">
                              <span class="redacted redacted--70pc"></span>
                              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                                class="icon icon--s flexRight">
                                <path
                                  d="M61 28H3c-1.7 0-3 1.8-3 3.5v1.1C0 34.2 1.3 36 3 36h58c1.7 0 3-1.8 3-3.5v-1C64 29.8 62.7 28 61 28z"
                                  class="vertical"></path>
                                <path
                                  d="M36 61V3c0-1.7-1.8-3-3.5-3l-1.1 0C29.8 0 28 1.3 28 3v58c0 1.7 1.8 3 3.5 3h1C34.2 64 36 62.7 36 61z"
                                  class="horizontal"></path>
                              </svg>
                            </div>
                          </summary>
                        </details>
                      </li>
                    </ol>
                  </div>
                </div>
              </li>

              <li class="card__new"
                *ngIf="contactGroupDetails?.contactPeople.length < 8 && !contactGroupDetails?.referenceCount && !isMaxPeople">
                <a href (click)="showHideOffCanvas($event)" class="overall"></a>
                <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--l">
                  <path
                    d="M60 35.9H4c-2.2 0-4-1.8-4-4v0c0-2.2 1.8-4 4-4h56c2.2 0 4 1.8 4 4v0C64 34.1 62.2 35.9 60 35.9z">
                  </path>
                  <path
                    d="M28 59.9v-56c0-2.2 1.8-4 4-4h0c2.2 0 4 1.8 4 4v56c0 2.2-1.8 4-4 4h0C29.8 63.9 28 62.2 28 59.9z"
                    class="plus-vertical"></path>
                </svg>Add Person
              </li>
            </ol>
          </div>



          <ng-container *ngIf="contactGroupDetails?.contactType === 4">
            <fieldset class="fieldset--width-max">
              <form class="pb-3" [formGroup]="companyFinderForm" autocompleteOff>
                <div [hidden]="!selectedCompanyDetails">
                  <div class="col-sm-10 offset-sm-2">
                    <label for="selectedCompany" class="small">Company Name</label>
                    <div class="form-group d-flex d-sm-block">
                      <input type="hidden" #selectedCompanyInput id="selectedCompany" formControlName="selectedCompany">
                      <button type="button" class="btn btn-link btn-sm p-0 mobile-btn"
                        (click)="editSelectedCompany(selectedCompanyDetails?.companyId)">
                        {{selectedCompanyDetails?.companyName}}
                      </button>
                      <button type="button" *ngIf="!isExistingCompany" class="btn btn-light btn-sm ml-2"
                        (click)="setCompanies()">Change</button>
                    </div>
                  </div>
                </div>


                <div>
                  <div class="col-sm-3 offset-sm-2" [hidden]="!isSearchCompanyVisible || isExistingCompany">
                    <div class="form-group">
                      <button type="button" class="btn btn-light btn-sm btn-block" (click)="setCompanies()">
                        <i class="fas fa-plus mr-2"></i>
                        Company
                      </button>
                    </div>
                  </div>
                  <div class="col-sm-8 col-xl-6 offset-sm-2">
                    <div class="off-canvas" [hidden]="!foundCompanies" (click)="foundCompanies = null">
                      <div class="off-canvas-content right slide-in-right" (click)="$event.stopPropagation()"
                        #offCanvasContent>
                        <h4 class="page-title text-left pt-3">
                          Company
                          <button type="button" class="close mr-2" aria-label="Close" (click)="foundCompanies = null">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </h4>
                        <div class="form-group">
                          <label for="company" class="small">Find</label>
                          <div class="input-group input-group-sm">
                            <input #companyNameInput type="search" id="company" class="form-control"
                              formControlName="companyName" (keydown.enter)="searchCompany()"
                              [ngbTypeahead]="suggestions" [focusFirst]="false"
                              (selectItem)="selectedSuggestion($event)">
                            <div class="input-group-append">
                              <button type="button" class="btn btn-secondary" (click)="searchCompany()">Search</button>
                            </div>
                          </div>
                        </div>
                        <div class="btn-link btn-sm p-0 mb-3" *ngIf="noSuggestions"
                          (click)="editSelectedCompany(0, true)">
                          <i class="fas fa-plus mr-2"></i>New Company
                        </div>
                        <app-subnav *ngIf="companiesSearched">
                          <app-subnav-item *ngFor="let company of foundCompanies" (click)="selectCompany(company)">
                            <div [innerHTML]="company.companyName | highlight : companyFinderForm.value.companyName">
                            </div>
                          </app-subnav-item>
                          <div class="list-group-item list-group-item-action text-center"
                            *ngIf="!foundCompanies?.length && companyFinderForm.value.companyName">
                            No company found. Try again or create a new one.
                          </div>
                          <div class="list-group-item list-group-item-action text-center py-4"
                            (click)="editSelectedCompany(0, true)">
                            <span class="btn-link"><i class="fas fa-plus mr-2"></i>New Company</span>
                          </div>
                        </app-subnav>
                      </div>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="contactGroupDetails?.companyAddress?.postCode; else showCompanyAddress">
                  <app-address *ngIf="contactGroupDetails" [companyAddress]="contactGroupDetails.companyAddress"
                    (addressDetails)="getAddress($event)"></app-address>
                </ng-container>
                <ng-template #showCompanyAddress>
                  <app-address *ngIf="(isCompanyAdded && companyFinderForm.value.selectedCompany) || isExistingCompany"
                    [companyDetails]="selectedCompanyDetails" (addressDetails)="getAddress($event)"></app-address>
                </ng-template>
              </form>
              <form class="pb-3" [formGroup]="contactGroupDetailsForm" autocompleteOff>
                <div class="row justify-content-end">
                  <div class="col-sm-10 offset-sm-2">
                    <div>
                      <div class="form-group col-sm-auto">
                        <label class="small">Type</label>

                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="solicitor"
                            formControlName="isSolicitor">
                          <label class="custom-control-label small" for="solicitor">Solicitor</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="invClerk"
                            formControlName="isInventoryClerk">
                          <label class="custom-control-label small" for="invClerk">Inventory Clerk</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="estateAgent"
                            formControlName="isEstateAgent">
                          <label class="custom-control-label small" for="estateAgent">Estate Agent</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="mortgageAdvisor"
                            formControlName="isMortgageAdvisor">
                          <label class="custom-control-label small" for="mortgageAdvisor">Mortgage Advisor</label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </fieldset>
          </ng-container>


          <ng-container *ngIf="!isNewContactGroup  || isTypePicked">
            <fieldset class="fieldset--width-max">
              <!-- <legend class="legend">People</legend> -->
              <div *ngIf="importantContactNotes?.length">
                <div class="message message--negative" *ngFor="let importantNote of importantContactNotes">
                  {{importantNote?.text}}
                </div>
              </div>

              <ol class="cards cards--marginBottom">
                <li *ngFor="let person of contactGroupDetails?.contactPeople ; index as i"
                  [ngClass]="{'new-person': person?.isNewPerson, 'list-group-item-danger': person?.warning && person?.warning?.id !== 1}">
                  <!-- <a [routerLink]="person?.isNewPerson ? null : ['../../../../detail', person?.personId ]" [queryParams]="{showNotes: true}"></a> -->
                  <!-- <ol class="list">
                    <li>
                      <span>
                        <sup>
                          <app-score-badge [person]="person"></app-score-badge> Match
                        </sup>
                        <p class="txt--title">{{person?.firstName | titlecase}} {{person?.lastName | titlecase}}</p>
                      </span>
                      <span class="pill pill--negative flexRight"
                        *ngIf="person?.warning && person?.warning?.id !== 1">{{person?.warningStatusComment || person?.warning?.value}}</span>
                      <span class="pill pill--positive flexRight"
                        *ngIf="person?.isMainPerson && contactGroupDetails.contactType !== 4">Main Person</span>

                      <div class="flexRight" *ngIf="!person?.isNewPerson; else removeSelectedPerson">
                        <div dropdown placement="bottom right">
                          <a class="btn btn-light dropdown-toggle" href [id]="'button' + i" dropdownToggle
                            (click)="$event.stopPropagation(); false" [attr.aria-controls]="'dropdown' + i"><svg
                              aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon">
                              <ellipse cx="32" cy="10.5" rx="5.9" ry="6" />
                              <ellipse cx="32" cy="32" rx="5.9" ry="6" />
                              <ellipse cx="32" cy="53.5" rx="5.9" ry="6" /></svg></a>
                          <ul [id]="'dropdown' + i" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu"
                            [attr.aria-labelledby]="'button' + i">
                            <li role="menuitem">
                              <a class="dropdown-item" (click)="editSelectedPerson(person?.personId)">
                                <span class="dropdown-icon"><i class="fas fa-edit fa-fw"></i></span>Edit
                              </a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" (click)="$event.stopPropagation();"
                                [routerLink]="person?.isNewPerson ? null : ['../../../../detail', person?.personId ]">
                                <span class="dropdown-icon"><i class="fas fa-address-card fa-fw"></i></span>View
                              </a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" (click)="setMainPerson(person?.personId)"
                                *ngIf="!person?.isMainPerson">
                                <span class="dropdown-icon"><i class="fas fa-user-shield fa-fw"></i></span>Set Main
                                Person
                              </a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" (click)="$event.stopPropagation();"
                                [routerLink]="['/leads-register/edit/', 0]"
                                [queryParams]="{isNewLead: true, personId: person?.personId}">
                                <span class="dropdown-icon"><i class="fas fa-user"></i><i
                                    class="fas fa-share-alt fa-xs align-text-top"></i></span>Create Lead
                              </a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" href (click)="removePerson(person?.personId, true)"
                                *ngIf="!contactGroupDetails?.referenceCount">
                                <span class="dropdown-icon"><i class="fas fa-user-times fa-fw"></i></span>
                                Remove
                              </a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </li>
                    <li *ngIf="!isNewContactGroup">
                      <span *ngIf="person?.personNotes?.length">
                        <div class="message message--negative" *ngFor="let importantNote of person?.personNotes">
                          {{importantNote.text}}
                        </div>
                      </span>
                    </li>

                    <li *ngIf="contactGroupDetails?.contactType !== 4">
                      <span>
                        <sup>Address</sup>
                        {{person?.address | formatAddress}}
                        <p class="txt--negative" *ngIf="!(person?.address | formatAddress)">No address</p>
                      </span>
                    </li>

                    <li *ngIf="!person?.phoneNumbers.length || !person?.phoneNumbers[0].number">
                      <span>
                        <sup>Phone Number</sup>
                        <p class="txt--negative">No phone</p>
                      </span>
                    </li>

                    <li *ngFor="let phoneNumber of person?.phoneNumbers">
                      <ng-container *ngIf="phoneNumber?.number">
                        <app-telephone [person]="person" [number]="phoneNumber.number"
                          [warning]="person?.warningStatusComment || person?.warning?.value"></app-telephone>
                      </ng-container>
                    </li>

                    <li>
                      <span>
                        <sup>Email</sup>
                        <p class="txt--negative"
                          *ngIf="!person?.emailAddresses.length || !person?.emailAddresses[0].email">
                          No email</p>
                        <ng-container *ngFor="let emailAddress of person?.emailAddresses">
                          <p *ngIf="emailAddress?.email">
                            <a (click)="$event.stopPropagation()"
                              href="mailto:{{emailAddress.email}}">{{emailAddress?.email}}</a>
                          </p>
                        </ng-container>
                      </span>
                    </li>

                    <li>
                      <span>
                        <sup>Marketing Preferences</sup>
                        <ol class="list list--simple">
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-positive">
                              <path
                                d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                            </svg>Quarty Bulletin</li>
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-negative">
                              <path
                                d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                            </svg>Special Offers</li>
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-negative">
                              <path
                                d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                            </svg>Landlord / Investor Events</li>
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-positive">
                              <path
                                d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                            </svg>New Homes / Investments</li>
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-negative">
                              <path
                                d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                            </svg>Other Occasional Marketing</li>
                        </ol>
                      </span>
                    </li>
                  </ol> -->
                  <app-person-details [personDetails]="person" [index]="i"
                    [contactType]="contactGroupDetails?.contactType"
                    [referenceCount]="contactGroupDetails?.referenceCount" [isPersonInfoOnly]="false" [isClickable]="true"
                    [showEditOnly]="false" [showViewPerson]="true" [showSetMainPerson]="true" [showRemovePerson]="true"
                    (selectedPersonId)="editSelectedPerson($event)" (mainPersonPersonId)="setMainPerson($event)"
                    (removedPersonPersonId)="removePerson($event, true)"></app-person-details>
                  <p><small class="flexBottom">P-{{person?.personId}}</small></p>
                  <!-- <div class="flexBottom">
                <ol class="list list--divider list--details">
                  <li>
                    <sup>Marketing Preferences</sup>
                    <a href class="btn btn-link px-0" (click)="showHideMarkPrefs($event, i)" [attr.aria-expanded]="!isCollapsed[i]" [attr.aria-controls]="'collapseMark' + i">Marketing
                      Prefs <span class="pill">{{person?.marketingPreferences?.count || 0}}</span>
                    </a>
                    <div [id]="'collapseMark' + i" [collapse]="!isCollapsed[i]">
                      <ul>
                        <li *ngIf="person?.marketingPreferences?.marketBulletin">Quarterly bulletin</li>
                        <li *ngIf="person?.marketingPreferences?.general">Special offers</li>
                        <li *ngIf="person?.marketingPreferences?.events">Landlord/investor events</li>
                        <li *ngIf="person?.marketingPreferences?.newHomes">New homes/investments</li>
                        <li *ngIf="person?.marketingPreferences?.general">Other occasional marketing</li>
                      </ul>
                    </div>
                  </li>
                </ol>
              </div> -->
                  <!-- <div>
                <div class="col-auto" *ngIf="!person?.isNewPerson; else removeSelectedPerson">
                  <div dropdown placement="bottom right">
                    <a class="btn btn-light dropdown-toggle" href [id]="'button' + i" dropdownToggle (click)="$event.stopPropagation(); false" [attr.aria-controls]="'dropdown' + i">Actions <span class="caret"></span></a>
                    <ul [id]="'dropdown' + i" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" [attr.aria-labelledby]="'button' + i">
                      <li role="menuitem">
                        <a class="dropdown-item" (click)="editSelectedPerson(person?.personId)">
                          <span class="dropdown-icon"><i class="fas fa-edit fa-fw"></i></span>Edit
                        </a>
                      </li>
                      <li role="menuitem">
                        <a class="dropdown-item" (click)="$event.stopPropagation();" [routerLink]="person?.isNewPerson ? null : ['../../../../detail', person?.personId ]">
                          <span class="dropdown-icon"><i class="fas fa-address-card fa-fw"></i></span>View
                        </a>
                      </li>
                      <li role="menuitem">
                        <a class="dropdown-item" (click)="setMainPerson(person?.personId)" *ngIf="!person?.isMainPerson">
                          <span class="dropdown-icon"><i class="fas fa-user-shield fa-fw"></i></span>Set Main Person
                        </a>
                      </li>
                      <li role="menuitem">
                        <a class="dropdown-item" (click)="$event.stopPropagation();" [routerLink]="['/leads-register/edit/', 0]" [queryParams]="{isNewLead: true, personId: person?.personId}">
                          <span class="dropdown-icon"><i class="fas fa-user"></i><i class="fas fa-share-alt fa-xs align-text-top"></i></span>Create Lead
                        </a>
                      </li>
                      <li role="menuitem">
                        <a class="dropdown-item" href (click)="removePerson(person?.personId, true)" *ngIf="!contactGroupDetails?.referenceCount">
                          <span class="dropdown-icon"><i class="fas fa-user-times fa-fw"></i></span>
                          Remove
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>  -->
                  <!-- <ng-template #removeSelectedPerson>
                    <div class="col text-right">
                      <div dropdown placement="bottom right">
                        <a class="btn btn-light dropdown-toggle" href [id]="'button' + i" dropdownToggle
                          (click)="$event.stopPropagation(); false" [attr.aria-controls]="'dropdown' + i">Actions
                          <span class="caret"></span></a>
                        <ul [id]="'dropdown' + i" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu"
                          [attr.aria-labelledby]="'button' + i">
                          <li role="menuitem"><a class="dropdown-item" (click)="editSelectedPerson(person?.personId)">
                              <span class="dropdown-icon">
                                <i class="fas fa-edit fa-fw"></i>
                              </span>
                              Edit</a></li>
                          <li role="menuitem"><a class="dropdown-item" href
                              (click)="removePerson(person?.personId, false)">
                              <span class="dropdown-icon">
                                <i class="fas fa-user-times fa-fw"></i>
                              </span>
                              Remove</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </ng-template> -->
                  <!-- <div *ngIf="!isNewContactGroup">
                    <ng-container *ngIf="person?.personNotes?.length">
                      <div class="message message--negative" *ngFor="let importantNote of person?.personNotes">
                        {{importantNote.text}}
                      </div>
                    </ng-container>
                  </div> -->
                  <!-- <p class="message message--negative">5 importtant messages</p>


                </div>
-->
                </li>
                <li class="card__new"
                  *ngIf="contactGroupDetails?.contactPeople?.length && !contactGroupDetails?.referenceCount && !isMaxPeople">
                  <a href (click)="showHideOffCanvas($event)" class="overall"></a>
                  <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--l">
                    <path
                      d="M60 35.9H4c-2.2 0-4-1.8-4-4v0c0-2.2 1.8-4 4-4h56c2.2 0 4 1.8 4 4v0C64 34.1 62.2 35.9 60 35.9z">
                    </path>
                    <path
                      d="M28 59.9v-56c0-2.2 1.8-4 4-4h0c2.2 0 4 1.8 4 4v56c0 2.2-1.8 4-4 4h0C29.8 63.9 28 62.2 28 59.9z"
                      class="plus-vertical"></path>
                  </svg>Add Person
                </li>
                <li class="card__warning" *ngIf="contactGroupDetails?.referenceCount && !isCloned"
                  (click)="cloneContactGroup()">
                  <span>
                    <p>Transaction history present. You can't add or remove people from this Contact Group.</p>
                    <p>If you want to add or remove a person, <a [routerLink]="['../', contactGroupId]">create a new
                        Contact Group</a></p>
                  </span>
                </li>
                <li class="card__warning" *ngIf="!(contactGroupDetails?.contactPeople.length < 8)">
                  <p>You can add max 8 People per contact group.</p>
                </li>
              </ol>
            </fieldset>

            <ng-container *ngIf="contactGroupDetails?.contactPeople.length">
              <fieldset class="fieldset--width-max">
                <legend class="legend">Details</legend>
                <form [formGroup]="contactGroupDetailsForm">
                  <fieldset>
                    <label for="salutation">Salutation</label>
                    <input type="text" id="salutation" formControlName="salutation">
                  </fieldset>

                  <fieldset>
                    <label for="addressee">Addressee</label>
                    <input type="text" id="addressee" formControlName="addressee">
                  </fieldset>

                  <fieldset>
                    <span class="checkbox">
                      <span>
                        <input type="checkbox" id="isRelocationAgent" formControlName="isRelocationAgent">
                        <label for="isRelocationAgent">Is Relocation Agent</label>
                      </span>
                    </span>
                  </fieldset>

                  <!-- <div>
                    <div class="col-sm-10 offset-sm-2"
                      [ngClass]="{'notes-disabled': !contactGroupDetails?.contactGroupId}">
                      <label class="small">Notes</label>
                      <small class="alert alert-info" *ngIf="!contactGroupDetails?.contactGroupId">Save to enable
                        Notes</small>
                      <app-notes [noteData]="dataNote" [contactGroupNotes]="dataNote?.notes"
                        [bottomReached]="bottomReached" [pageNumber]="page"></app-notes>
                    </div>
                  </div> -->
                </form>
              </fieldset>
            </ng-container>
          </ng-container>

          <footer class="footer">
            <button type="button" class="btn btn--ghost" (click)="cancel()">Cancel</button>
            <button type="submit" class="btn btn--positive" (click)="saveContactGroup()"
              [attr.disabled]="!contactGroupDetails?.contactPeople.length || (isSubmitting && !errorMessage) || !contactGroupDetailsForm?.dirty? '' : null">
              <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="loading"
                *ngIf="isSubmitting && !errorMessage">
                <path
                  d="M11.9 48.4c-4.1-5-6.3-11.5-5.8-18.6C7.1 17.6 16.8 7.5 29 6.2 44.7 4.4 58 16.7 58 32c0 6.2-2.2 11.8-5.8 16.3 -1 1.2-0.8 2.9 0.3 4l0 0c1.3 1.3 3.4 1.1 4.5-0.3 4.8-6 7.5-13.8 7-22.2C62.9 14 50.1 1.2 34.3 0.1 15.6-1.2 0 13.6 0 32c0 7.7 2.7 14.8 7.3 20.3 1.1 1.3 3 1.4 4.2 0.2l0.2-0.2C12.8 51.2 12.8 49.6 11.9 48.4z">
                </path>
              </svg>
              Save
            </button>
          </footer>
        </form>
        <!--Add  [showHeader]="false" to hide header -->
        <p-dialog header="Find Person" [(visible)]="isOffCanvasVisible" [modal]="true" [draggable]="false">
          <app-person-duplicate-checker [isOffCanvasVisible]="isOffCanvasVisible"
            [contactGroupDetails]="contactGroupDetails" [searchTerm]="signer" [isCreateNewPerson]="isCreateNewPerson"
            (addedPersonDetails)="getAddedPersonDetails($event)" (selectedPerson)="getSelectedPerson($event)"
            (isCanvasHidden)="resetCanvasFlag()" (makeButtonVisible)="toggleNewPersonVisibility($event)">
          </app-person-duplicate-checker>
          <p-footer>
            <button *ngIf="isCreateNewPersonVisible" class="btn btn--ghost"
              (click)="createNewContactGroupPerson()">Create new person</button>
          </p-footer>
        </p-dialog>

        <!-- <app-person-duplicate-checker *ngIf="isOffCanvasVisible" [isOffCanvasVisible]="isOffCanvasVisible"
          [contactGroupDetails]="contactGroupDetails" [searchTerm]="signer"
          (addedPersonDetails)="getAddedPersonDetails($event)" (selectedPerson)="getSelectedPerson($event)"
          (isCanvasHidden)="resetCanvasFlag($event)">
        </app-person-duplicate-checker> -->
        <app-additional-info
          [id]="contactGroupDetails?.contactGroupId ? 'CG-'+contactGroupDetails?.contactGroupId : ''">
        </app-additional-info>
      </ng-container>
    </div>

  </div>