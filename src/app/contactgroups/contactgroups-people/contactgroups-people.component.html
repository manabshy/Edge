<div class="row">
  <div class="row__item row__item--aside">
    <div class="card card--sticky">
      <div class="card__body">
        <ol class="list list--divider list--hover">
          <li [ngClass]="{current: item.isCurrent}" *ngFor="let item of infoTypes;index as i">
            <a role="button" class="overall" (click)="setInfoType(item?.name,i)"></a>
            {{item?.name|toPascalCase}}
          </li>
        </ol>
      </div>
    </div>
  </div>

  <div class="row__item">
    <div [ngSwitch]="info">
      <ng-container *ngSwitchCase="'notes'">
        <div>
          <div class="col-sm-10 offset-sm-2" [ngClass]="{'notes-disabled': !contactGroupDetails?.contactGroupId}">
            <!-- <label class="small">Notes</label> -->
            <small class="alert alert-info" *ngIf="!contactGroupDetails?.contactGroupId">Save to enable
              Notes</small>
            <app-notes [noteData]="dataNote" [contactGroupNotes]="dataNote?.notes" [bottomReached]="bottomReached"
              [pageNumber]="page"></app-notes>
          </div>
        </div>
      </ng-container>
      <ng-container *ngSwitchDefault>
        <!-- <app-breadcrumb></app-breadcrumb> -->
        <h2>
          <ng-container *ngIf="isNewContactGroup;else existingContact">New Contact Group</ng-container>
          <ng-template #existingContact>
            <ng-container *ngIf="contactGroupDetails?.contactType === 4; else peopleCG">Company</ng-container>
            <ng-template #peopleCG>Personal</ng-template> Contact Group
          </ng-template>
          <span class="pill pill--positive" *ngIf="isAMLCompleted">AML Completed</span>
        </h2>
        <div class="message message--warning"
          *ngIf="contactGroupDetails?.contactPeople && (contactGroupDetails?.contactPeople.length !== initialContactGroupLength) && isTypePicked">
          There are pending changes on the people list. Save to make them effective.
        </div>
        <div class="message message--negative"
          *ngIf="contactGroupDetails?.contactPeople && !contactGroupDetails?.contactPeople.length && !isNewContactGroup && !isExistingCompany">
          You must add at least <b>1</b> person in the contact group.
        </div>
        <div class="alert alert-danger"
          *ngIf="contactGroupDetails?.contactPeople && companyAlert && !isNewContactGroup && !isExistingCompany">
          You must add <b>1</b> company for a company contact.
        </div>

        <!-- <form action="">
      <fieldset class="fieldset--width-max">
        <legend class="legend">Company</legend>
        <label for="">Company Name</label>
        <button class="btn btn--link">Name here</button><button class="btn btn--ghost btn--onRight">Change</button>
      </fieldset>

      <fieldset>
        <label for="">Country</label>
        <span class="select">
          <select>
            <option>United Kingdom</option>
          </select>
        </span>
      </fieldset>

      <fieldset>
        <label for="">Find Address (Postcode)</label>
        <div class="inline-parent inline-parent--search">
          <input type="text">
          <button class="btn btn--search">Search</button>
        </div>
      </fieldset>

      <fieldset>
        <label for="">Address Lines</label>
        <textarea></textarea>
      </fieldset>

      <fieldset>
        <label for="">Postcode</label>
        <input type="text">
      </fieldset>

      <fieldset>
        <label for="">Type</label>
        <span class="checkbox">
          <span>
            <input type="checkbox" tabindex="" name="" id="solicitor">
            <label for="solicitor">Solicitor</label>
          </span>
          <span>
            <input type="checkbox" tabindex="" name="" id="invClerk">
            <label for="invClerk">Inventory Clerk</label>
          </span>
          <span>
            <input type="checkbox" tabindex="" name="" id="estateAgent">
            <label for="estateAgent">Estate Agent</label>
          </span>
          <span>
            <input type="checkbox" tabindex="" name="" id="mortgageAdvisor">
            <label for="mortgageAdvisor">Mortgage Advisor</label>
          </span>
        </span>
      </fieldset>
    </form> -->

        <form action="">
          <ng-container *ngIf="isNewContactGroup && !isTypePicked">
            <h5>Type of Contact Group?</h5>
            <div class="list-group list-group-horizontal-sm mb-3">
              <div class="list-group-item list-group-item-action text-center" (click)="isCompanyContactGroup(false)">
                <span class="btn btn-link">
                  <i class="fas fa-users fa-lg"></i><br>
                  Personal Contact Group
                </span>
              </div>
              <div class="list-group-item list-group-item-action text-center" (click)="isCompanyContactGroup(true)">
                <span class="btn btn-link">
                  <i class="fas fa-briefcase fa-lg"></i><br>
                  Company Contact Group
                </span>
              </div>
            </div>
          </ng-container>


          <ng-container *ngIf="contactGroupDetails?.contactType === 4">
            <fieldset class="fieldset--width-max">
              <form class="pb-3" [formGroup]="companyFinderForm" autocompleteOff>
                <div [hidden]="!selectedCompanyDetails">
                  <div class="col-sm-10 offset-sm-2">
                    <label for="selectedCompany" class="small">Company Name</label>
                    <div class="form-group d-flex d-sm-block">
                      <input type="hidden" #selectedCompanyInput id="selectedCompany" formControlName="selectedCompany">
                      <button type="button" class="btn btn-link btn-sm p-0 mobile-btn"
                        (click)="editSelectedCompany(selectedCompanyDetails?.companyId)">
                        {{selectedCompanyDetails?.companyName}}
                      </button>
                      <button type="button" *ngIf="!isExistingCompany" class="btn btn-light btn-sm ml-2"
                        (click)="setCompanies()">Change</button>
                    </div>
                  </div>
                </div>


                <div>
                  <div class="col-sm-3 offset-sm-2" [hidden]="!isSearchCompanyVisible || isExistingCompany">
                    <div class="form-group">
                      <button type="button" class="btn btn-light btn-sm btn-block" (click)="setCompanies()">
                        <i class="fas fa-plus mr-2"></i>
                        Company
                      </button>
                    </div>
                  </div>
                  <div class="col-sm-8 col-xl-6 offset-sm-2">
                    <div class="off-canvas" [hidden]="!foundCompanies" (click)="foundCompanies = null">
                      <div class="off-canvas-content right slide-in-right" (click)="$event.stopPropagation()"
                        #offCanvasContent>
                        <h4 class="page-title text-left pt-3">
                          Company
                          <button type="button" class="close mr-2" aria-label="Close" (click)="foundCompanies = null">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </h4>
                        <div class="form-group">
                          <label for="company" class="small">Find</label>
                          <div class="input-group input-group-sm">
                            <input #companyNameInput type="search" id="company" class="form-control"
                              formControlName="companyName" (keydown.enter)="searchCompany()"
                              [ngbTypeahead]="suggestions" [focusFirst]="false"
                              (selectItem)="selectedSuggestion($event)">
                            <div class="input-group-append">
                              <button type="button" class="btn btn-secondary" (click)="searchCompany()">Search</button>
                            </div>
                          </div>
                        </div>
                        <div class="btn-link btn-sm p-0 mb-3" *ngIf="noSuggestions"
                          (click)="editSelectedCompany(0, true)">
                          <i class="fas fa-plus mr-2"></i>New Company
                        </div>
                        <app-subnav *ngIf="companiesSearched">
                          <app-subnav-item *ngFor="let company of foundCompanies" (click)="selectCompany(company)">
                            <div [innerHTML]="company.companyName | highlight : companyFinderForm.value.companyName">
                            </div>
                          </app-subnav-item>
                          <div class="list-group-item list-group-item-action text-center"
                            *ngIf="!foundCompanies?.length && companyFinderForm.value.companyName">
                            No company found. Try again or create a new one.
                          </div>
                          <div class="list-group-item list-group-item-action text-center py-4"
                            (click)="editSelectedCompany(0, true)">
                            <span class="btn-link"><i class="fas fa-plus mr-2"></i>New Company</span>
                          </div>
                        </app-subnav>
                      </div>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="contactGroupDetails?.companyAddress?.postCode; else showCompanyAddress">
                  <app-address *ngIf="contactGroupDetails" [companyAddress]="contactGroupDetails.companyAddress"
                    (addressDetails)="getAddress($event)"></app-address>
                </ng-container>
                <ng-template #showCompanyAddress>
                  <app-address *ngIf="(isCompanyAdded && companyFinderForm.value.selectedCompany) || isExistingCompany"
                    [companyDetails]="selectedCompanyDetails" (addressDetails)="getAddress($event)"></app-address>
                </ng-template>
              </form>
              <form class="pb-3" [formGroup]="contactGroupDetailsForm" autocompleteOff>
                <div class="row justify-content-end">
                  <div class="col-sm-10 offset-sm-2">
                    <div>
                      <div class="form-group col-sm-auto">
                        <label class="small">Type</label>

                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="solicitor"
                            formControlName="isSolicitor">
                          <label class="custom-control-label small" for="solicitor">Solicitor</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="invClerk"
                            formControlName="isInventoryClerk">
                          <label class="custom-control-label small" for="invClerk">Inventory Clerk</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="estateAgent"
                            formControlName="isEstateAgent">
                          <label class="custom-control-label small" for="estateAgent">Estate Agent</label>
                        </div>
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="mortgageAdvisor"
                            formControlName="isMortgageAdvisor">
                          <label class="custom-control-label small" for="mortgageAdvisor">Mortgage Advisor</label>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </form>
            </fieldset>
          </ng-container>


          <ng-container *ngIf="!isNewContactGroup  || isTypePicked">
            <fieldset class="fieldset--width-max">
              <!-- <legend class="legend">People</legend> -->
              <div *ngIf="importantContactNotes?.length">
                <div class="message message--negative" *ngFor="let importantNote of importantContactNotes">
                  {{importantNote.text}}
                </div>
              </div>

              <ol class="cards cards--marginBottom">
                <li *ngFor="let person of contactGroupDetails?.contactPeople ; index as i"
                  [ngClass]="{'new-person': person?.isNewPerson, 'list-group-item-danger': person?.warning && person?.warning?.id !== 1}">
                  <!-- <a [routerLink]="person?.isNewPerson ? null : ['../../../../detail', person?.personId ]" [queryParams]="{showNotes: true}"></a> -->
                  <!-- <ol class="list">
                    <li>
                      <span>
                        <sup>
                          <app-score-badge [person]="person"></app-score-badge> Match
                        </sup>
                        <p class="txt--title">{{person?.firstName | titlecase}} {{person?.lastName | titlecase}}</p>
                      </span>
                      <span class="pill pill--negative flexRight"
                        *ngIf="person?.warning && person?.warning?.id !== 1">{{person?.warningStatusComment || person?.warning?.value}}</span>
                      <span class="pill pill--positive flexRight"
                        *ngIf="person?.isMainPerson && contactGroupDetails.contactType !== 4">Main Person</span>

                      <div class="flexRight" *ngIf="!person?.isNewPerson; else removeSelectedPerson">
                        <div dropdown placement="bottom right">
                          <a class="btn btn-light dropdown-toggle" href [id]="'button' + i" dropdownToggle
                            (click)="$event.stopPropagation(); false" [attr.aria-controls]="'dropdown' + i"><svg
                              aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon">
                              <ellipse class="st0" cx="32" cy="10.5" rx="5.9" ry="6" />
                              <ellipse class="st0" cx="32" cy="32" rx="5.9" ry="6" />
                              <ellipse class="st0" cx="32" cy="53.5" rx="5.9" ry="6" /></svg></a>
                          <ul [id]="'dropdown' + i" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu"
                            [attr.aria-labelledby]="'button' + i">
                            <li role="menuitem">
                              <a class="dropdown-item" (click)="editSelectedPerson(person?.personId)">
                                <span class="dropdown-icon"><i class="fas fa-edit fa-fw"></i></span>Edit
                              </a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" (click)="$event.stopPropagation();"
                                [routerLink]="person?.isNewPerson ? null : ['../../../../detail', person?.personId ]">
                                <span class="dropdown-icon"><i class="fas fa-address-card fa-fw"></i></span>View
                              </a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" (click)="setMainPerson(person?.personId)"
                                *ngIf="!person?.isMainPerson">
                                <span class="dropdown-icon"><i class="fas fa-user-shield fa-fw"></i></span>Set Main
                                Person
                              </a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" (click)="$event.stopPropagation();"
                                [routerLink]="['/leads-register/edit/', 0]"
                                [queryParams]="{isNewLead: true, personId: person?.personId}">
                                <span class="dropdown-icon"><i class="fas fa-user"></i><i
                                    class="fas fa-share-alt fa-xs align-text-top"></i></span>Create Lead
                              </a>
                            </li>
                            <li role="menuitem">
                              <a class="dropdown-item" href (click)="removePerson(person?.personId, true)"
                                *ngIf="!contactGroupDetails?.referenceCount">
                                <span class="dropdown-icon"><i class="fas fa-user-times fa-fw"></i></span>
                                Remove
                              </a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </li>
                    <li *ngIf="!isNewContactGroup">
                      <span *ngIf="person?.personNotes?.length">
                        <div class="message message--negative" *ngFor="let importantNote of person?.personNotes">
                          {{importantNote.text}}
                        </div>
                      </span>
                    </li>

                    <li *ngIf="contactGroupDetails?.contactType !== 4">
                      <span>
                        <sup>Address</sup>
                        {{person?.address | formatAddress}}
                        <p class="txt--negative" *ngIf="!(person?.address | formatAddress)">No address</p>
                      </span>
                    </li>

                    <li *ngIf="!person?.phoneNumbers.length || !person?.phoneNumbers[0].number">
                      <span>
                        <sup>Phone Number</sup>
                        <p class="txt--negative">No phone</p>
                      </span>
                    </li>

                    <li *ngFor="let phoneNumber of person?.phoneNumbers">
                      <ng-container *ngIf="phoneNumber?.number">
                        <app-telephone [person]="person" [number]="phoneNumber.number"
                          [warning]="person?.warningStatusComment || person?.warning?.value"></app-telephone>
                      </ng-container>
                    </li>

                    <li>
                      <span>
                        <sup>Email</sup>
                        <p class="txt--negative"
                          *ngIf="!person?.emailAddresses.length || !person?.emailAddresses[0].email">
                          No email</p>
                        <ng-container *ngFor="let emailAddress of person?.emailAddresses">
                          <p *ngIf="emailAddress?.email">
                            <a (click)="$event.stopPropagation()"
                              href="mailto:{{emailAddress.email}}">{{emailAddress?.email}}</a>
                          </p>
                        </ng-container>
                      </span>
                    </li>

                    <li>
                      <span>
                        <sup>Marketing Preferences</sup>
                        <ol class="list list--simple">
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-positive">
                              <path
                                d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                            </svg>Quarty Bulletin</li>
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-negative">
                              <path
                                d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                            </svg>Special Offers</li>
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-negative">
                              <path
                                d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                            </svg>Landlord / Investor Events</li>
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-positive">
                              <path
                                d="M62.8 9.3l-1.9-1.7c-1.5-1.4-3.8-1.2-5.2 0.3L23.9 43.1c-1.4 1.5-3.6 1.5-5.1 0.2L8.1 32.3c-1.4-1.4-3.7-1.4-5.2 0l-1.9 1.9c-1.4 1.4-1.4 3.7 0 5.2l16.7 16.7c1.9 1.9 5.1 1.9 7-0.1L63 14.5C64.4 13 64.3 10.7 62.8 9.3z" />
                            </svg>New Homes / Investments</li>
                          <li><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64"
                              class="icon icon--s icon--onLeft icon--fill-negative">
                              <path
                                d="M58.7 52.2L38.5 32l20.1-20.1c1.4-1.4 1-3.9-0.4-5.2l-0.8-0.9C56 4.4 53.5 4 52.1 5.3L32 25.5 11.9 5.3c-1.4-1.4-3.9-1-5.2 0.4L5.8 6.6C4.4 8 4 10.5 5.3 11.9L25.5 32 5.4 52.1c-1.4 1.4-1 3.9 0.4 5.2l0.8 0.9c1.4 1.4 3.9 1.8 5.2 0.4l20.2-20.2 20.1 20.1c1.4 1.4 3.9 1 5.2-0.4l0.8-0.8C59.6 56 60 53.5 58.7 52.2z" />
                            </svg>Other Occasional Marketing</li>
                        </ol>
                      </span>
                    </li>
                  </ol> -->
                  <app-person-details [personDetails]="person" [index]="i"
                    [contactType]="contactGroupDetails?.contactType"
                    [referenceCount]="contactGroupDetails?.referenceCount" [isPersonInfoOnly]="false"
                    [showViewPerson]="true" [showSetMainPerson]="true" [showRemovePerson]="true"
                    (selectedPersonId)="editSelectedPerson($event)" (mainPersonPersonId)="setMainPerson($event)"
                    (removedPersonPersonId)="removePerson($event)"></app-person-details>
                  <p><small class="flexBottom">P-{{person?.personId}}</small></p>
                  <!-- <div class="flexBottom">
                <ol class="list list--divider list--details">
                  <li>
                    <sup>Marketing Preferences</sup>
                    <a href class="btn btn-link px-0" (click)="showHideMarkPrefs($event, i)" [attr.aria-expanded]="!isCollapsed[i]" [attr.aria-controls]="'collapseMark' + i">Marketing
                      Prefs <span class="pill">{{person?.marketingPreferences?.count || 0}}</span>
                    </a>
                    <div [id]="'collapseMark' + i" [collapse]="!isCollapsed[i]">
                      <ul>
                        <li *ngIf="person?.marketingPreferences?.marketBulletin">Quarterly bulletin</li>
                        <li *ngIf="person?.marketingPreferences?.general">Special offers</li>
                        <li *ngIf="person?.marketingPreferences?.events">Landlord/investor events</li>
                        <li *ngIf="person?.marketingPreferences?.newHomes">New homes/investments</li>
                        <li *ngIf="person?.marketingPreferences?.general">Other occasional marketing</li>
                      </ul>
                    </div>
                  </li>
                </ol>
              </div> -->
                  <!-- <div>
                <div class="col-auto" *ngIf="!person?.isNewPerson; else removeSelectedPerson">
                  <div dropdown placement="bottom right">
                    <a class="btn btn-light dropdown-toggle" href [id]="'button' + i" dropdownToggle (click)="$event.stopPropagation(); false" [attr.aria-controls]="'dropdown' + i">Actions <span class="caret"></span></a>
                    <ul [id]="'dropdown' + i" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu" [attr.aria-labelledby]="'button' + i">
                      <li role="menuitem">
                        <a class="dropdown-item" (click)="editSelectedPerson(person?.personId)">
                          <span class="dropdown-icon"><i class="fas fa-edit fa-fw"></i></span>Edit
                        </a>
                      </li>
                      <li role="menuitem">
                        <a class="dropdown-item" (click)="$event.stopPropagation();" [routerLink]="person?.isNewPerson ? null : ['../../../../detail', person?.personId ]">
                          <span class="dropdown-icon"><i class="fas fa-address-card fa-fw"></i></span>View
                        </a>
                      </li>
                      <li role="menuitem">
                        <a class="dropdown-item" (click)="setMainPerson(person?.personId)" *ngIf="!person?.isMainPerson">
                          <span class="dropdown-icon"><i class="fas fa-user-shield fa-fw"></i></span>Set Main Person
                        </a>
                      </li>
                      <li role="menuitem">
                        <a class="dropdown-item" (click)="$event.stopPropagation();" [routerLink]="['/leads-register/edit/', 0]" [queryParams]="{isNewLead: true, personId: person?.personId}">
                          <span class="dropdown-icon"><i class="fas fa-user"></i><i class="fas fa-share-alt fa-xs align-text-top"></i></span>Create Lead
                        </a>
                      </li>
                      <li role="menuitem">
                        <a class="dropdown-item" href (click)="removePerson(person?.personId, true)" *ngIf="!contactGroupDetails?.referenceCount">
                          <span class="dropdown-icon"><i class="fas fa-user-times fa-fw"></i></span>
                          Remove
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>  -->
                  <!-- <ng-template #removeSelectedPerson>
                    <div class="col text-right">
                      <div dropdown placement="bottom right">
                        <a class="btn btn-light dropdown-toggle" href [id]="'button' + i" dropdownToggle
                          (click)="$event.stopPropagation(); false" [attr.aria-controls]="'dropdown' + i">Actions
                          <span class="caret"></span></a>
                        <ul [id]="'dropdown' + i" *dropdownMenu class="dropdown-menu dropdown-menu-right" role="menu"
                          [attr.aria-labelledby]="'button' + i">
                          <li role="menuitem"><a class="dropdown-item" (click)="editSelectedPerson(person?.personId)">
                              <span class="dropdown-icon">
                                <i class="fas fa-edit fa-fw"></i>
                              </span>
                              Edit</a></li>
                          <li role="menuitem"><a class="dropdown-item" href
                              (click)="removePerson(person?.personId, false)">
                              <span class="dropdown-icon">
                                <i class="fas fa-user-times fa-fw"></i>
                              </span>
                              Remove</a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </ng-template> -->
                  <!-- <div *ngIf="!isNewContactGroup">
                    <ng-container *ngIf="person?.personNotes?.length">
                      <div class="message message--negative" *ngFor="let importantNote of person?.personNotes">
                        {{importantNote.text}}
                      </div>
                    </ng-container>
                  </div> -->
                  <!-- <p class="message message--negative">5 importtant messages</p>


                </div>
-->
                </li>
                <li class="card__new"
                  *ngIf="contactGroupDetails?.contactPeople.length < 8 && !contactGroupDetails?.referenceCount && !isMaxPeople">
                  <a href (click)="showHideOffCanvas($event)" class="overall"></a>
                  <svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="icon icon--l icon--onLeft">
                    <path
                      d="M60 35.9H4c-2.2 0-4-1.8-4-4v0c0-2.2 1.8-4 4-4h56c2.2 0 4 1.8 4 4v0C64 34.1 62.2 35.9 60 35.9z">
                    </path>
                    <path
                      d="M28 59.9v-56c0-2.2 1.8-4 4-4h0c2.2 0 4 1.8 4 4v56c0 2.2-1.8 4-4 4h0C29.8 63.9 28 62.2 28 59.9z"
                      class="plus-vertical"></path>
                  </svg>Add New Contact
                </li>
                <li *ngIf="contactGroupDetails?.referenceCount && !isCloned" (click)="cloneContactGroup()">
                  <div class="message message--warning">
                    Transaction history present. You can't add or remove people from this Contact Group.<br>If you want
                    to add or remove a person, <a [routerLink]="['../', contactGroupId]">create a new Contact Group</a>
                  </div>
                </li>
                <li *ngIf="!(contactGroupDetails?.contactPeople.length < 8)">
                  <div class="message message--warning">
                    You can add max 8 People per contact group.
                  </div>
                </li>
              </ol>
            </fieldset>

            <ng-container *ngIf="contactGroupDetails?.contactPeople.length">
              <fieldset class="fieldset--width-max">
                <legend class="legend">Details</legend>
                <form [formGroup]="contactGroupDetailsForm">
                  <fieldset>
                    <label for="salutation">Salutation</label>
                    <input type="text" id="salutation" formControlName="salutation">
                  </fieldset>

                  <fieldset>
                    <label for="addressee">Addressee</label>
                    <input type="text" id="addressee" formControlName="addressee">
                  </fieldset>

                  <fieldset>
                    <span class="checkbox">
                      <span>
                        <input type="checkbox" id="isRelocationAgent" formControlName="isRelocationAgent">
                        <label for="isRelocationAgent">Is Relocation Agent</label>
                      </span>
                    </span>
                  </fieldset>

                  <!-- <div>
                    <div class="col-sm-10 offset-sm-2"
                      [ngClass]="{'notes-disabled': !contactGroupDetails?.contactGroupId}">
                      <label class="small">Notes</label>
                      <small class="alert alert-info" *ngIf="!contactGroupDetails?.contactGroupId">Save to enable
                        Notes</small>
                      <app-notes [noteData]="dataNote" [contactGroupNotes]="dataNote?.notes"
                        [bottomReached]="bottomReached" [pageNumber]="page"></app-notes>
                    </div>
                  </div> -->
                </form>
              </fieldset>
            </ng-container>
          </ng-container>

          <div class="form-actions">
            <div class="container">
              <div class="row justify-content-end w-100 no-gutters">
                <div class="col-sm-10 d-flex">
                  <button type="button" class="btn btn-light mr-2" (click)="cancel()">Cancel</button>
                  <button type="submit" class="btn btn-secondary" (click)="saveContactGroup()"
                    [attr.disabled]="!contactGroupDetails?.contactPeople.length || (isSubmitting && !errorMessage) ? '' : null">
                    <i class="fas fa-spinner fa-pulse d-inline-block mr-2"
                      *ngIf="isSubmitting && !errorMessage"></i>Save
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form>
        <app-person-duplicate-checker *ngIf="isOffCanvasVisible" [isOffCanvasVisible]="isOffCanvasVisible"
          [contactGroupDetails]="contactGroupDetails" [searchTerm]="signer"
          (addedPersonDetails)="getAddedPersonDetails($event)" (selectedPerson)="getSelectedPerson($event)"
          (isCanvasHidden)="resetCanvasFlag($event)">
        </app-person-duplicate-checker>
        <app-additional-info
          [id]="contactGroupDetails?.contactGroupId ? 'CG-'+contactGroupDetails?.contactGroupId : ''">
        </app-additional-info>
      </ng-container>
    </div>

  </div>