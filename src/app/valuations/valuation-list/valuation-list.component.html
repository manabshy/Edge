<div *ngIf="valuations" class="search-results" infiniteScroll [infiniteScrollDistance]="5"
  [infiniteScrollUpDistance]="1.5" [infiniteScrollThrottle]="20" [immediateCheck]="true" [alwaysCallback]="true">
</div>
<div class="table-responsive">
  <table class="table table-hover border bg-white">
    <thead>
      <tr>
        <th>Status</th>
        <th class="long-content">Address</th>
        <th class="long-content">Owner</th>
        <th>Date</th>
        <th>Valuer</th>
        <th class="values">Sale</th>
        <th class="values">Long Let</th>
        <th class="values">Short Let</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let val of valuations" (click)="navigateTo(['detail', val?.valuationEventId, 'edit'])">
        <td>
          <span class="badge badge-pill badge-primary">{{val?.valuationStatusLabel}}</span>
        </td>
        <td class="long-content">
          <dl class="row">
            <dt class="col-4 d-sm-none">Address</dt>
            <dd class="col">
              <a class="table-link" [routerLink]="['detail', val?.valuationEventId, 'edit']" (click)="$event.stopPropagation()">
                {{val?.property?.address | formatAddress}}
              </a>
            </dd>
          </dl>
        </td>
        <td class="long-content">
          <dl class="row">
            <dt class="col-4 d-sm-none">Owner</dt>
            <dd class="col">{{val?.propertyOwner?.contactNames || '-'}}</dd>
          </dl>
        </td>
        <td>
          <dl class="row">
            <dt class="col-4 d-sm-none">Date</dt>
            <dd class="col">{{(val?.valuationDate | date: 'dd/MM/yyyy hh:mm') || '-'}}</dd>
          </dl>
        </td>
        <td>
          <dl class="row">
            <dt class="col-4 d-sm-none">Valuer</dt>
            <dd class="col">{{val?.valuer?.fullName}}</dd>
          </dl>
        </td>
        <td class="values">
          <dl class="row">
            <dt class="col-4 d-sm-none">Sales</dt>
            <dd class="col">
              <ng-container *ngIf="val?.suggestedAskingPrice, else noValue">
                {{val?.suggestedAskingPrice | currency:'GBP':'symbol':'1.0-0'}}</ng-container>
            </dd>
          </dl>
        </td>
        <td class="values">
          <dl class="row">
            <dt class="col-4 d-sm-none">Long Let</dt>
            <dd class="col">
              <ng-container *ngIf="val?.suggestedAskingRentLongLet, else noValue">
                {{val?.suggestedAskingRentLongLet | currency:'GBP':'symbol':'1.0-0'}} pw</ng-container>
            </dd>
          </dl>
        </td>
        <td class="values">
          <dl class="row">
            <dt class="col-4 d-sm-none">Short Let</dt>
            <dd class="col">
              <ng-container *ngIf="val?.suggestedAskingRentShortLet, else noValue">
                {{val?.suggestedAskingRentShortLet | currency:'GBP':'symbol':'1.0-0'}} pw</ng-container>
            </dd>
          </dl>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #noValue>-</ng-template>