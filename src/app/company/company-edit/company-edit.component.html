<div class="row">
  <div class="row__item">
    <!-- <h2><ng-container *ngIf="isNewCompany; else editLabel">New</ng-container><ng-template #editLabel>Edit</ng-template> Company</h2> -->

    <ng-container *ngIf="companyDetails || isNewCompany">
      <form [formGroup]="companyForm" (ngSubmit)="saveCompany()" autocompleteOff>

        <app-company-finder class="appWrapper" [existingCompany]="companyDetails" [companyNameError]="formErrors.companyName" (companyName)="getCompanyName($event)" (selectedCompanyDetails)="navigateToCompany($event)"></app-company-finder>

        <input type="hidden" id="companyName" class="form-control" formControlName="companyName">

        <fieldset>
          <label for="companyType">Company Type</label>
          <span class="select">
            <select id="companyType" formControlName="companyTypeId">
              <option *ngFor="let type of companyTypes" [value]=type.id>{{type.value}}</option>
            </select>
          </span>
        </fieldset>

        <ledgend class="legend">Signer</ledgend>
        <app-signer class="appWrapper" (selectedSigner)="getSelectedSigner($event)" (newSigner)="createNewSigner($event)" [existingSigner]="existingSigner"></app-signer>

        <ledgend class="legend">Company Address</ledgend>
        <app-address class="appWrapper" [companyDetails]="companyDetails" (addressDetails)="getAddress($event)"></app-address>

        <ledgend class="legend">Contact Details</ledgend>
        <fieldset>
          <label for="companyTelephone" class="small">Telephone</label>
          <input type="text" id="companyTelephone" placeholder="" class="form-control form-control-sm" formControlName="telephone" [ngClass]="{'is-invalid':formErrors.telephone}">
          <span class="invalid-feedback">{{formErrors?.telephone}}</span>
        </fieldset>

        <fieldset>
          <label for="companyFax" class="small">Fax</label>
          <input type="text" id="companyFax" placeholder="" class="form-control form-control-sm" formControlName="fax" [ngClass]="{'is-invalid':formErrors.fax}">
          <span class="invalid-feedback">{{formErrors?.fax}}</span>
        </fieldset>

        <fieldset>
          <label for="companyWebsite" class="small">Website</label>
          <input type="text" id="companyWebsite" placeholder="" class="form-control form-control-sm" formControlName="website">
        </fieldset>

        <fieldset>
          <label for="companyEmail" class="small">Email</label>
          <input type="text" id="companyEmail" placeholder="" class="form-control form-control-sm" formControlName="email" [ngClass]="{'is-invalid':formErrors.email}">
          <span class="invalid-feedback">{{formErrors?.email}}</span>
        </fieldset>

        <ledgend class="legend">AML</ledgend>
        <fieldset>
          <label for="amlDate">AML Completed</label>
          <input type="text" id="amlDate" placeholder="dd/mm/yyyy" class="form-control fake-readonly" formControlName="amlCompletedDate" [bsConfig]="{showWeekNumbers:false, dateInputFormat: 'DD/MM/YYYY', maxDate:todaysDate, customTodayClass: 'font-weight-bold'}" bsDatepicker #datepicker="bsDatepicker" [appNoDoubleTap]='datepicker' readonly>
          <button type="button" class="btn btn--ghost" (click)="clearControlValue(companyForm.get('amlCompletedDate'))" *ngIf="companyForm.value.amlCompletedDate">Clear</button>
        </fieldset>
        <footer class="footer">
          <button (click)="cancel()" type="button" class="btn btn--ghost">Cancel</button>
          <button type="submit" class="btn btn--positive" [attr.disabled]="isSubmitting ? '' : null"><svg aria-hidden="true" width="64" height="64" viewBox="0 0 64 64" class="loading" *ngIf="isSubmitting"><path d="M11.9 48.4c-4.1-5-6.3-11.5-5.8-18.6C7.1 17.6 16.8 7.5 29 6.2 44.7 4.4 58 16.7 58 32c0 6.2-2.2 11.8-5.8 16.3 -1 1.2-0.8 2.9 0.3 4l0 0c1.3 1.3 3.4 1.1 4.5-0.3 4.8-6 7.5-13.8 7-22.2C62.9 14 50.1 1.2 34.3 0.1 15.6-1.2 0 13.6 0 32c0 7.7 2.7 14.8 7.3 20.3 1.1 1.3 3 1.4 4.2 0.2l0.2-0.2C12.8 51.2 12.8 49.6 11.9 48.4z"></path></svg>Save</button>
        </footer>
      </form>
    </ng-container>

    <app-additional-info class="appWrapper" [id]="companyDetails?.companyId ? 'CO-'+companyDetails?.companyId : ''"></app-additional-info>
  </div>
</div>